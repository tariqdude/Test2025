---
import { themes, type ThemeName } from '../styles/theme.ts';

interface Props {
  theme?: ThemeName;
  className?: string;
}

const { theme = 'dark', className = '' } = Astro.props;
const currentTheme = themes[theme] || themes.dark;
---

<div
  class={`theme-provider ${className}`}
  data-theme={theme}
  style={`
    --color-primary: ${currentTheme.colors.primary};
    --color-secondary: ${currentTheme.colors.secondary};
    --color-accent: ${currentTheme.colors.accent};
    --color-background: ${currentTheme.colors.background};
    --color-surface: ${currentTheme.colors.surface};
    --color-text-primary: ${currentTheme.colors.text.primary};
    --color-text-secondary: ${currentTheme.colors.text.secondary};
    --color-text-muted: ${currentTheme.colors.text.muted};
    --color-text-inverse: ${currentTheme.colors.text.inverse};
    --color-border: ${currentTheme.colors.border};
    --color-error: ${currentTheme.colors.error};
    --color-warning: ${currentTheme.colors.warning};
    --color-success: ${currentTheme.colors.success};
    --gradient-primary: ${currentTheme.gradients.primary};
    --gradient-secondary: ${currentTheme.gradients.secondary};
    --font-family-sans: ${currentTheme.typography.fontFamily.sans};
    --font-family-mono: ${currentTheme.typography.fontFamily.mono};
    --font-size-xs: ${currentTheme.typography.fontSize.xs};
    --font-size-sm: ${currentTheme.typography.fontSize.sm};
    --font-size-base: ${currentTheme.typography.fontSize.base};
    --font-size-lg: ${currentTheme.typography.fontSize.lg};
    --font-size-xl: ${currentTheme.typography.fontSize.xl};
    --font-size-2xl: ${currentTheme.typography.fontSize['2xl']};
    --font-size-3xl: ${currentTheme.typography.fontSize['3xl']};
    --font-size-4xl: ${currentTheme.typography.fontSize['4xl']};
    --line-height-tight: ${currentTheme.typography.lineHeight.tight};
    --line-height-normal: ${currentTheme.typography.lineHeight.normal};
    --line-height-relaxed: ${currentTheme.typography.lineHeight.relaxed};
    --spacing-xs: ${currentTheme.spacing.xs};
    --spacing-sm: ${currentTheme.spacing.sm};
    --spacing-md: ${currentTheme.spacing.md};
    --spacing-lg: ${currentTheme.spacing.lg};
    --spacing-xl: ${currentTheme.spacing.xl};
    --spacing-2xl: ${currentTheme.spacing['2xl']};
    --spacing-3xl: ${currentTheme.spacing['3xl']};
    --radius-sm: ${currentTheme.borderRadius.sm};
    --radius-md: ${currentTheme.borderRadius.md};
    --radius-lg: ${currentTheme.borderRadius.lg};
    --radius-xl: ${currentTheme.borderRadius.xl};
    --radius-full: ${currentTheme.borderRadius.full};
  --shadow-sm: ${currentTheme.effects.shadow.sm};
  --shadow-md: ${currentTheme.effects.shadow.md};
  --shadow-lg: ${currentTheme.effects.shadow.lg};
  --shadow-xl: ${currentTheme.effects.shadow.xl};
  --shadow-2xl: ${currentTheme.effects.shadow['2xl']};
  --blur-sm: ${currentTheme.effects.blur.sm};
  --blur-md: ${currentTheme.effects.blur.md};
  --blur-lg: ${currentTheme.effects.blur.lg};
  --blur-xl: ${currentTheme.effects.blur.xl};
    --duration-fast: ${currentTheme.animation.duration.fast};
    --duration-normal: ${currentTheme.animation.duration.normal};
    --duration-slow: ${currentTheme.animation.duration.slow};
    --easing-ease-in: ${currentTheme.animation.easing.easeIn};
    --easing-ease-out: ${currentTheme.animation.easing.easeOut};
    --easing-ease-in-out: ${currentTheme.animation.easing.easeInOut};
    --easing-bounce: ${currentTheme.animation.easing.bounce};
  `}
>
  <slot />
</div>

<style>
  .theme-provider {
    color: var(--color-text-primary);
    background-color: var(--color-background);
    font-family: var(--font-family-sans);
    transition:
      color var(--duration-normal) var(--easing-ease-out),
      background-color var(--duration-normal) var(--easing-ease-out);
    min-height: 100vh;
  }

  /* Global component styles */
  .theme-provider .btn {
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 500;
    transition: all var(--duration-normal) var(--easing-ease-out);
    cursor: pointer;
    border: none;
  }

  .theme-provider .btn-primary {
    background: var(--gradient-primary);
    color: var(--color-text-inverse);
  }

  .theme-provider .btn-primary:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
    box-shadow: var(--shadow-lg);
  }

  .theme-provider .btn-secondary {
    background: var(--color-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
  }

  .theme-provider .btn-secondary:hover {
    background: var(--color-border);
    transform: translateY(-1px);
  }

  .theme-provider .card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
    transition: all var(--duration-normal) var(--easing-ease-out);
  }

  .theme-provider .card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-xl);
  }

  .theme-provider .input {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text-primary);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
    transition: all var(--duration-normal) var(--easing-ease-out);
  }

  .theme-provider .input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
  }

  .theme-provider .text-primary {
    color: var(--color-text-primary);
  }

  .theme-provider .text-secondary {
    color: var(--color-text-secondary);
  }

  .theme-provider .text-muted {
    color: var(--color-text-muted);
  }

  .theme-provider .bg-surface {
    background-color: var(--color-surface);
  }

  .theme-provider .bg-primary {
    background: var(--gradient-primary);
  }

  .theme-provider .border {
    border-color: var(--color-border);
  }

  /* Animation utilities */
  .theme-provider .animate-fade-in {
    animation: fadeIn var(--duration-slow) var(--easing-ease-out);
  }

  .theme-provider .animate-slide-up {
    animation: slideUp var(--duration-normal) var(--easing-ease-out);
  }

  .theme-provider .animate-bounce {
    animation: bounce 1s var(--easing-bounce);
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes bounce {
    0%,
    20%,
    53%,
    80%,
    100% {
      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      transform: translateY(0);
    }
    40%,
    43% {
      animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
      transform: translateY(-15px);
    }
    70% {
      animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
      transform: translateY(-7px);
    }
    90% {
      transform: translateY(-2px);
    }
  }

  /* Responsive breakpoints */
  @media (max-width: 768px) {
    .theme-provider {
      font-size: 14px;
    }

    .theme-provider .card {
      padding: var(--spacing-md);
    }
  }

  @media (max-width: 480px) {
    .theme-provider {
      font-size: 13px;
    }

    .theme-provider .card {
      padding: var(--spacing-sm);
    }
  }
</style>
