---
/**
 * BackgroundEffects - Animated background decorations
 *
 * Features:
 * - Mesh gradients
 * - Floating orbs
 * - Grid patterns
 * - Noise textures
 * - Particle effects
 */

export interface Props {
  variant?: 'mesh' | 'orbs' | 'grid' | 'noise' | 'particles' | 'waves';
  intensity?: 'subtle' | 'medium' | 'strong';
  animated?: boolean;
  blur?: 'none' | 'sm' | 'md' | 'lg' | 'xl';
  className?: string;
}

const {
  variant = 'mesh',
  intensity = 'medium',
  animated = true,
  blur = 'xl',
  className = '',
} = Astro.props;

const intensityOpacity = {
  subtle: 'opacity-20',
  medium: 'opacity-40',
  strong: 'opacity-60',
};

const blurClasses = {
  none: '',
  sm: 'blur-sm',
  md: 'blur-md',
  lg: 'blur-lg',
  xl: 'blur-3xl',
};
---

<div
  class={`fixed inset-0 -z-10 overflow-hidden pointer-events-none ${className}`}
>
  {
    variant === 'mesh' && (
      <div class={`absolute inset-0 ${intensityOpacity[intensity]}`}>
        <div
          class={`absolute top-0 -left-4 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter ${blurClasses[blur]} ${animated ? 'animate-float' : ''}`}
        />
        <div
          class={`absolute top-0 -right-4 w-72 h-72 bg-yellow-500 rounded-full mix-blend-multiply filter ${blurClasses[blur]} ${animated ? 'animate-float' : ''}`}
          style="animation-delay: 2s"
        />
        <div
          class={`absolute -bottom-8 left-20 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter ${blurClasses[blur]} ${animated ? 'animate-float' : ''}`}
          style="animation-delay: 4s"
        />
        <div
          class={`absolute bottom-0 right-20 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter ${blurClasses[blur]} ${animated ? 'animate-float' : ''}`}
          style="animation-delay: 6s"
        />
      </div>
    )
  }

  {
    variant === 'orbs' && (
      <div class={`absolute inset-0 ${intensityOpacity[intensity]}`}>
        <div
          class={`absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-radial from-blue-500 to-transparent rounded-full ${blurClasses[blur]} ${animated ? 'animate-pulse-slow' : ''}`}
        />
        <div
          class={`absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-radial from-purple-500 to-transparent rounded-full ${blurClasses[blur]} ${animated ? 'animate-pulse-slow' : ''}`}
          style="animation-delay: 1.5s"
        />
        <div
          class={`absolute top-1/2 right-1/3 w-64 h-64 bg-gradient-radial from-pink-500 to-transparent rounded-full ${blurClasses[blur]} ${animated ? 'animate-pulse-slow' : ''}`}
          style="animation-delay: 3s"
        />
      </div>
    )
  }

  {
    variant === 'grid' && (
      <div class={`absolute inset-0 ${intensityOpacity[intensity]}`}>
        <div class="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]" />
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-white to-transparent dark:via-neutral-900" />
      </div>
    )
  }

  {
    variant === 'noise' && (
      <div
        class={`absolute inset-0 ${intensityOpacity[intensity]} bg-noise mix-blend-overlay`}
      />
    )
  }

  {
    variant === 'particles' && (
      <div class={`absolute inset-0 ${intensityOpacity[intensity]}`}>
        {Array.from({ length: 20 }).map(() => (
          <div
            class={`absolute w-1 h-1 bg-white rounded-full ${animated ? 'animate-float' : ''}`}
            style={`
            top: ${Math.random() * 100}%;
            left: ${Math.random() * 100}%;
            animation-delay: ${Math.random() * 5}s;
            animation-duration: ${10 + Math.random() * 10}s;
          `}
          />
        ))}
      </div>
    )
  }

  {
    variant === 'waves' && (
      <div class={`absolute inset-0 ${intensityOpacity[intensity]}`}>
        <svg
          class="absolute bottom-0 left-0 w-full"
          viewBox="0 0 1440 320"
          preserveAspectRatio="none"
        >
          <path
            fill="currentColor"
            fill-opacity="0.1"
            d="M0,160L48,176C96,192,192,224,288,224C384,224,480,192,576,170.7C672,149,768,139,864,154.7C960,171,1056,213,1152,213.3C1248,213,1344,171,1392,149.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
            class={animated ? 'animate-wave' : ''}
          />
        </svg>
      </div>
    )
  }
</div>

<style>
  @keyframes wave {
    0%,
    100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(-25%);
    }
  }

  .animate-wave {
    animation: wave 10s ease-in-out infinite;
  }
</style>
