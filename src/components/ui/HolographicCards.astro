---
/**
 * Holographic Cards - Cards with prismatic rainbow effects
 */
---

<div class="holographic-section">
  <h2 class="holo-title">Holographic Effects</h2>
  <p class="holo-subtitle">
    Interactive prismatic cards â€¢ Click to flip â€¢ Hold to cycle spectrums
  </p>

  <div class="holo-controls">
    <button class="holo-btn active" data-mode="default">Default Hologram</button
    >
    <button class="holo-btn" data-mode="rainbow">Rainbow Cycle</button>
    <button class="holo-btn" data-mode="chrome">Chrome Shimmer</button>
    <button class="holo-btn" data-mode="neon">Neon Pulse</button>
    <button class="holo-btn" data-action="shuffle">ðŸ”€ Shuffle Cards</button>
  </div>

  <div class="holo-grid" data-holo-system>
    {
      [
        {
          icon: 'ðŸ’Ž',
          title: 'Premium',
          desc: 'Exclusive features',
          color: '#ec4899',
        },
        {
          icon: 'âš¡',
          title: 'Lightning',
          desc: 'Ultra fast speed',
          color: '#f59e0b',
        },
        {
          icon: 'ðŸŽ¯',
          title: 'Precision',
          desc: 'Pixel perfect',
          color: '#3b82f6',
        },
        {
          icon: 'ðŸ”®',
          title: 'Magic',
          desc: 'Pure innovation',
          color: '#8b5cf6',
        },
        {
          icon: 'ðŸš€',
          title: 'Velocity',
          desc: 'Next-gen tech',
          color: '#10b981',
        },
        {
          icon: 'âœ¨',
          title: 'Sparkle',
          desc: 'Visual effects',
          color: '#f472b6',
        },
      ].map((card, i) => (
        <div
          class="holo-card"
          data-tilt
          data-card-index={i}
          data-color={card.color}
        >
          <div class="holo-shine" />
          <div class="holo-spectrum" />
          <div class="holo-particles">
            {Array.from({ length: 8 }).map(() => (
              <div class="particle" />
            ))}
          </div>
          <div class="holo-content card-front">
            <div class="holo-icon">{card.icon}</div>
            <h3>{card.title}</h3>
            <p>{card.desc}</p>
            <div class="card-badge">Click to flip</div>
          </div>
          <div class="holo-content card-back">
            <div class="back-pattern" />
            <h3>Holographic</h3>
            <p>Advanced prismatic rendering with real-time light refraction</p>
            <div class="card-badge">Click again</div>
          </div>
        </div>
      ))
    }
  </div>
</div>

<style>
  .holographic-section {
    padding: 6rem 2rem;
    background: linear-gradient(
      180deg,
      transparent,
      rgba(168, 85, 247, 0.05),
      transparent
    );
    min-height: 900px;
  }

  .holo-title {
    font-size: 4rem;
    font-weight: 900;
    text-align: center;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #ec4899 0%, #a78bfa 50%, #60a5fa 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.02em;
    filter: drop-shadow(0 0 40px rgba(236, 72, 153, 0.3));
    animation: titleFlow 4s ease-in-out infinite;
  }

  @keyframes titleFlow {
    0%,
    100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  .holo-subtitle {
    text-align: center;
    color: rgba(203, 213, 225, 0.9);
    margin-bottom: 2rem;
    font-size: 1.25rem;
    font-weight: 300;
  }

  .holo-controls {
    display: flex;
    gap: 12px;
    margin: 0 auto 3rem;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 900px;
  }

  .holo-btn {
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(168, 85, 247, 0.3);
    border-radius: 8px;
    color: #a78bfa;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .holo-btn:hover {
    background: rgba(168, 85, 247, 0.1);
    border-color: rgba(168, 85, 247, 0.6);
    box-shadow: 0 0 25px rgba(168, 85, 247, 0.4);
    transform: translateY(-2px);
  }

  .holo-btn.active {
    background: rgba(168, 85, 247, 0.2);
    border-color: #a78bfa;
    box-shadow: 0 0 35px rgba(168, 85, 247, 0.6);
  }

  .holo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 3rem;
    max-width: 1600px;
    margin: 0 auto;
    perspective: 2000px;
  }

  .holo-card {
    position: relative;
    height: 420px;
    border-radius: 28px;
    padding: 3.5rem;
    background: rgba(15, 23, 42, 0.85);
    border: 2px solid rgba(168, 85, 247, 0.3);
    overflow: hidden;
    cursor: pointer;
    transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
    transform-style: preserve-3d;
  }

  .holo-card.flipped {
    transform: rotateY(180deg);
  }

  .holo-card.flipped:hover {
    transform: rotateY(180deg) translateY(-16px) scale(1.03);
  }

  .holo-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      115deg,
      transparent 0%,
      rgba(255, 0, 255, 0.4) 25%,
      transparent 47%,
      transparent 53%,
      rgba(0, 255, 255, 0.4) 75%,
      transparent 100%
    );
    opacity: 0;
    transition: opacity 0.6s;
    mix-blend-mode: color-dodge;
    backface-visibility: hidden;
  }

  .holo-card:hover::before {
    opacity: 1;
  }

  .holo-shine {
    position: absolute;
    inset: -100%;
    background: linear-gradient(
      45deg,
      transparent,
      rgba(255, 255, 255, 0.03) 40%,
      rgba(255, 255, 255, 0.15) 50%,
      rgba(255, 255, 255, 0.03) 60%,
      transparent
    );
    transform: translateX(-100%) translateY(-100%) rotate(45deg);
    transition: transform 0.8s;
    backface-visibility: hidden;
  }

  .holo-card:hover .holo-shine {
    transform: translateX(100%) translateY(100%) rotate(45deg);
  }

  .holo-spectrum {
    position: absolute;
    inset: 0;
    background: conic-gradient(
      from 0deg,
      rgba(255, 0, 0, 0.3),
      rgba(255, 255, 0, 0.3),
      rgba(0, 255, 0, 0.3),
      rgba(0, 255, 255, 0.3),
      rgba(0, 0, 255, 0.3),
      rgba(255, 0, 255, 0.3),
      rgba(255, 0, 0, 0.3)
    );
    opacity: 0;
    transition: opacity 0.6s;
    mix-blend-mode: screen;
    animation: spectrumRotate 8s linear infinite;
    backface-visibility: hidden;
  }

  @keyframes spectrumRotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  [data-mode='rainbow'] .holo-spectrum {
    opacity: 0.6;
  }

  [data-mode='chrome'] .holo-card {
    background: linear-gradient(
      135deg,
      rgba(192, 192, 192, 0.1),
      rgba(255, 255, 255, 0.1),
      rgba(192, 192, 192, 0.1)
    );
  }

  [data-mode='neon'] .holo-card {
    border-color: rgba(255, 0, 255, 0.8);
    box-shadow: 0 0 40px rgba(255, 0, 255, 0.5);
  }

  .holo-particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
    backface-visibility: hidden;
  }

  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.8), transparent);
    border-radius: 50%;
    opacity: 0;
    animation: particleFloat 3s ease-in-out infinite;
  }

  .particle:nth-child(1) {
    left: 10%;
    animation-delay: 0s;
  }
  .particle:nth-child(2) {
    left: 30%;
    animation-delay: 0.5s;
  }
  .particle:nth-child(3) {
    left: 50%;
    animation-delay: 1s;
  }
  .particle:nth-child(4) {
    left: 70%;
    animation-delay: 1.5s;
  }
  .particle:nth-child(5) {
    left: 20%;
    animation-delay: 2s;
  }
  .particle:nth-child(6) {
    left: 80%;
    animation-delay: 2.5s;
  }
  .particle:nth-child(7) {
    left: 40%;
    animation-delay: 3s;
  }
  .particle:nth-child(8) {
    left: 60%;
    animation-delay: 3.5s;
  }

  @keyframes particleFloat {
    0% {
      bottom: 0;
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      bottom: 100%;
      opacity: 0;
    }
  }

  .holo-card:hover .particle {
    animation-duration: 2s;
  }

  .holo-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      repeating-linear-gradient(
        0deg,
        rgba(255, 119, 255, 0.1) 0px,
        rgba(0, 255, 255, 0.1) 2px,
        transparent 4px,
        transparent 6px
      ),
      repeating-linear-gradient(
        90deg,
        rgba(255, 0, 128, 0.1) 0px,
        rgba(0, 255, 255, 0.1) 2px,
        transparent 4px,
        transparent 6px
      );
    opacity: 0;
    transition: opacity 0.6s;
    mix-blend-mode: color-dodge;
    pointer-events: none;
    backface-visibility: hidden;
  }

  .holo-card:hover::after {
    opacity: 0.2;
  }

  .holo-card:hover {
    transform: translateY(-16px) scale(1.03);
    box-shadow:
      0 0 80px rgba(168, 85, 247, 0.6),
      0 0 120px rgba(236, 72, 153, 0.4),
      inset 0 0 80px rgba(168, 85, 247, 0.2);
    border-color: rgba(236, 72, 153, 0.7);
  }

  .holo-content {
    position: absolute;
    inset: 0;
    padding: 3.5rem;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    backface-visibility: hidden;
  }

  .card-front {
    transform: rotateY(0deg);
  }

  .card-back {
    transform: rotateY(180deg);
    background: rgba(0, 0, 0, 0.3);
  }

  .back-pattern {
    position: absolute;
    inset: 0;
    background: repeating-conic-gradient(
      from 0deg at 50% 50%,
      rgba(168, 85, 247, 0.2) 0deg,
      rgba(236, 72, 153, 0.2) 45deg,
      transparent 90deg,
      transparent 180deg
    );
    animation: patternSpin 10s linear infinite;
  }

  @keyframes patternSpin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .card-badge {
    margin-top: 1.5rem;
    padding: 8px 16px;
    background: rgba(168, 85, 247, 0.2);
    border: 1px solid rgba(168, 85, 247, 0.5);
    border-radius: 20px;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
  }

  .holo-icon {
    font-size: 5.5rem;
    margin-bottom: 2rem;
    filter: drop-shadow(0 0 30px rgba(99, 102, 241, 1));
    animation: holoFloat 3s ease-in-out infinite;
    transition: transform 0.3s ease;
  }

  .holo-card:hover .holo-icon {
    transform: scale(1.2) rotateZ(10deg);
  }

  @keyframes holoFloat {
    0%,
    100% {
      transform: translateY(0) rotateZ(0deg);
    }
    50% {
      transform: translateY(-25px) rotateZ(8deg);
    }
  }

  .holo-content h3 {
    font-size: 2.2rem;
    font-weight: 800;
    margin-bottom: 0.75rem;
    background: linear-gradient(135deg, #ffffff, #a5b4fc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
  }

  .holo-content p {
    color: rgba(226, 232, 240, 0.8);
    font-size: 1.15rem;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .holo-title {
      font-size: 2.5rem;
    }

    .holo-card {
      height: 350px;
    }

    .holo-icon {
      font-size: 4rem;
    }

    .holo-controls {
      gap: 8px;
    }

    .holo-btn {
      padding: 8px 16px;
      font-size: 0.9rem;
    }
  }
</style>

<script>
  const holoSystem = document.querySelector(
    '[data-holo-system]'
  ) as HTMLElement | null;
  const holoCards = document.querySelectorAll(
    '[data-tilt]'
  ) as NodeListOf<HTMLElement>;
  const modeButtons = document.querySelectorAll(
    '[data-mode]'
  ) as NodeListOf<HTMLElement>;
  const shuffleButton = document.querySelector(
    '[data-action="shuffle"]'
  ) as HTMLElement | null;

  if (holoSystem && holoCards) {
    let currentMode = 'default';

    // Mode switching
    modeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        modeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const mode = btn.dataset.mode;
        if (mode) {
          currentMode = mode;
          holoSystem.dataset.mode = mode;
        }
      });
    });

    // Card flip on click
    holoCards.forEach(card => {
      card.addEventListener('click', e => {
        if (!(e.target as HTMLElement).closest('[data-action]')) {
          card.classList.toggle('flipped');
        }
      });

      // Enhanced 3D tilt effect
      card.addEventListener('mousemove', (e: MouseEvent) => {
        if (card.classList.contains('flipped')) return;

        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const centerX = rect.width / 2;
        const centerY = rect.height / 2;

        const rotateX = ((y - centerY) / centerY) * -20;
        const rotateY = ((x - centerX) / centerX) * 20;

        card.style.transform = `perspective(2000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-16px) scale(1.03)`;
      });

      card.addEventListener('mouseleave', () => {
        if (!card.classList.contains('flipped')) {
          card.style.transform =
            'perspective(2000px) rotateX(0) rotateY(0) translateY(0) scale(1)';
        }
      });
    });

    // Shuffle cards animation
    if (shuffleButton) {
      shuffleButton.addEventListener('click', () => {
        const grid = holoSystem;
        const cards = Array.from(holoCards);

        // Remove flipped state
        cards.forEach(c => c.classList.remove('flipped'));

        // Shuffle animation
        cards.forEach(card => {
          card.style.transition =
            'all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
          card.style.transform = `
            translateX(${(Math.random() - 0.5) * 300}px)
            translateY(${(Math.random() - 0.5) * 300}px)
            rotateZ(${(Math.random() - 0.5) * 720}deg)
            scale(0.3)
          `;
          card.style.opacity = '0';
        });

        setTimeout(() => {
          // Shuffle array
          for (let i = cards.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            grid.insertBefore(cards[j], cards[i].nextSibling);
          }

          // Reset positions
          cards.forEach((card, i) => {
            setTimeout(() => {
              card.style.transform =
                'translateX(0) translateY(0) rotateZ(0) scale(1)';
              card.style.opacity = '1';
            }, i * 100);
          });

          setTimeout(() => {
            cards.forEach(card => {
              card.style.transition = '';
            });
          }, 1000);
        }, 600);
      });
    }

    // Color mode cycle on long press
    let pressTimer: ReturnType<typeof setTimeout>;
    holoCards.forEach(card => {
      card.addEventListener('mousedown', () => {
        pressTimer = setTimeout(() => {
          const modes = ['default', 'rainbow', 'chrome', 'neon'];
          const currentIndex = modes.indexOf(currentMode);
          const nextIndex = (currentIndex + 1) % modes.length;
          currentMode = modes[nextIndex];

          holoSystem.dataset.mode = currentMode;
          modeButtons.forEach(b => {
            b.classList.toggle('active', b.dataset.mode === currentMode);
          });
        }, 1000);
      });

      card.addEventListener('mouseup', () => {
        clearTimeout(pressTimer);
      });

      card.addEventListener('mouseleave', () => {
        clearTimeout(pressTimer);
      });
    });
  }
</script>
