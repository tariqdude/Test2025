---
/**
 * Advanced CSS 3D Scene with interactive animations
 */

export interface Props {
  className?: string;
}

const { className = '' } = Astro.props;
---

<div class={`three-scene-container ${className}`}>
  <div class="three-scene">
    <!-- Central glowing sphere -->
    <div class="sphere-container">
      <div class="sphere">
        <div class="sphere-inner"></div>
        <div class="sphere-glow"></div>
      </div>
      <div class="sphere-ring ring-1"></div>
      <div class="sphere-ring ring-2"></div>
      <div class="sphere-ring ring-3"></div>
    </div>

    <!-- Orbiting cubes -->
    <div class="orbit-path orbit-1">
      <div class="cube cube-1">
        <div class="face front"></div>
        <div class="face back"></div>
        <div class="face right"></div>
        <div class="face left"></div>
        <div class="face top"></div>
        <div class="face bottom"></div>
      </div>
    </div>

    <div class="orbit-path orbit-2">
      <div class="cube cube-2">
        <div class="face front"></div>
        <div class="face back"></div>
        <div class="face right"></div>
        <div class="face left"></div>
        <div class="face top"></div>
        <div class="face bottom"></div>
      </div>
    </div>

    <div class="orbit-path orbit-3">
      <div class="cube cube-3">
        <div class="face front"></div>
        <div class="face back"></div>
        <div class="face right"></div>
        <div class="face left"></div>
        <div class="face top"></div>
        <div class="face bottom"></div>
      </div>
    </div>

    <!-- Energy beams -->
    <div class="energy-beam beam-1"></div>
    <div class="energy-beam beam-2"></div>
    <div class="energy-beam beam-3"></div>
    <div class="energy-beam beam-4"></div>

    <!-- Particles -->
    {
      Array.from({ length: 30 }).map(() => (
        <div
          class="particle"
          style={`
          left: ${Math.random() * 100}%;
          top: ${Math.random() * 100}%;
          animation-delay: ${Math.random() * 5}s;
          animation-duration: ${3 + Math.random() * 4}s;
          width: ${2 + Math.random() * 4}px;
          height: ${2 + Math.random() * 4}px;
        `}
        />
      ))
    }
  </div>
</div>

<style>
  .three-scene-container {
    width: 100%;
    height: 100%;
    min-height: 700px;
    position: relative;
    overflow: hidden;
    perspective: 1500px;
    background: radial-gradient(
      ellipse at center,
      rgba(99, 102, 241, 0.1) 0%,
      transparent 70%
    );
  }

  .three-scene {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    transform-style: preserve-3d;
  }

  /* Sphere animations */
  .sphere-container {
    position: relative;
    width: 250px;
    height: 250px;
    transform-style: preserve-3d;
    animation: float-sphere 8s ease-in-out infinite;
  }

  .sphere {
    width: 100%;
    height: 100%;
    position: relative;
    border-radius: 50%;
    transform-style: preserve-3d;
    animation: rotate-sphere 25s linear infinite;
  }

  .sphere-inner {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: radial-gradient(
      circle at 35% 35%,
      rgba(168, 85, 247, 0.9),
      rgba(99, 102, 241, 0.8),
      rgba(59, 130, 246, 0.6)
    );
    box-shadow:
      0 0 80px rgba(168, 85, 247, 0.8),
      0 0 120px rgba(99, 102, 241, 0.6),
      inset 0 0 60px rgba(255, 255, 255, 0.3);
    animation: pulse-glow 4s ease-in-out infinite;
  }

  .sphere-glow {
    position: absolute;
    inset: -20%;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(168, 85, 247, 0.4) 0%,
      transparent 70%
    );
    filter: blur(30px);
    animation: pulse-glow 4s ease-in-out infinite reverse;
  }

  .sphere-ring {
    position: absolute;
    border-radius: 50%;
    border: 2px solid rgba(168, 85, 247, 0.5);
    box-shadow:
      0 0 20px rgba(168, 85, 247, 0.6),
      inset 0 0 20px rgba(168, 85, 247, 0.3);
    transform-style: preserve-3d;
  }

  .ring-1 {
    inset: -25%;
    animation: rotate-ring-1 10s linear infinite;
    border-color: rgba(99, 102, 241, 0.6);
  }

  .ring-2 {
    inset: -50%;
    animation: rotate-ring-2 15s linear infinite reverse;
    border-color: rgba(59, 130, 246, 0.5);
  }

  .ring-3 {
    inset: -75%;
    animation: rotate-ring-3 20s linear infinite;
    border-color: rgba(236, 72, 153, 0.4);
  }

  /* Orbiting cubes */
  .orbit-path {
    position: absolute;
    transform-style: preserve-3d;
  }

  .orbit-1 {
    animation: orbit-path-1 18s linear infinite;
  }

  .orbit-2 {
    animation: orbit-path-2 22s linear infinite reverse;
  }

  .orbit-3 {
    animation: orbit-path-3 28s linear infinite;
  }

  .cube {
    width: 60px;
    height: 60px;
    position: relative;
    transform-style: preserve-3d;
    animation: spin-cube 6s linear infinite;
  }

  .cube-2 {
    animation-duration: 8s;
    animation-direction: reverse;
  }

  .cube-3 {
    animation-duration: 10s;
  }

  .face {
    position: absolute;
    width: 60px;
    height: 60px;
    background: linear-gradient(
      135deg,
      rgba(99, 102, 241, 0.6),
      rgba(168, 85, 247, 0.6)
    );
    border: 1px solid rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(10px);
    box-shadow:
      inset 0 0 20px rgba(255, 255, 255, 0.2),
      0 0 20px rgba(99, 102, 241, 0.4);
  }

  .front {
    transform: translateZ(30px);
  }
  .back {
    transform: rotateY(180deg) translateZ(30px);
  }
  .right {
    transform: rotateY(90deg) translateZ(30px);
  }
  .left {
    transform: rotateY(-90deg) translateZ(30px);
  }
  .top {
    transform: rotateX(90deg) translateZ(30px);
  }
  .bottom {
    transform: rotateX(-90deg) translateZ(30px);
  }

  /* Energy beams */
  .energy-beam {
    position: absolute;
    width: 2px;
    height: 600px;
    background: linear-gradient(
      180deg,
      transparent 0%,
      rgba(168, 85, 247, 0.8) 50%,
      transparent 100%
    );
    box-shadow: 0 0 20px rgba(168, 85, 247, 0.8);
    transform-origin: center;
    animation: rotate-beam 12s linear infinite;
  }

  .beam-1 {
    transform: rotate(0deg);
  }

  .beam-2 {
    transform: rotate(60deg);
    animation-delay: -4s;
  }

  .beam-3 {
    transform: rotate(120deg);
    animation-delay: -8s;
  }

  .beam-4 {
    transform: rotate(180deg);
    width: 4px;
    background: linear-gradient(
      180deg,
      transparent 0%,
      rgba(59, 130, 246, 0.6) 50%,
      transparent 100%
    );
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.8);
  }

  /* Particles */
  .particle {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(255, 255, 255, 1) 0%,
      rgba(168, 85, 247, 0.8) 50%,
      transparent 100%
    );
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    animation: float-particle 7s infinite ease-in-out;
    pointer-events: none;
  }

  /* Animations */
  @keyframes float-sphere {
    0%,
    100% {
      transform: translateY(0px) rotateX(0deg);
    }
    50% {
      transform: translateY(-30px) rotateX(10deg);
    }
  }

  @keyframes rotate-sphere {
    from {
      transform: rotateY(0deg) rotateX(0deg);
    }
    to {
      transform: rotateY(360deg) rotateX(360deg);
    }
  }

  @keyframes pulse-glow {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.05);
    }
  }

  @keyframes rotate-ring-1 {
    from {
      transform: rotateX(75deg) rotateY(0deg);
    }
    to {
      transform: rotateX(75deg) rotateY(360deg);
    }
  }

  @keyframes rotate-ring-2 {
    from {
      transform: rotateY(75deg) rotateZ(0deg);
    }
    to {
      transform: rotateY(75deg) rotateZ(360deg);
    }
  }

  @keyframes rotate-ring-3 {
    from {
      transform: rotateX(45deg) rotateZ(0deg);
    }
    to {
      transform: rotateX(45deg) rotateZ(360deg);
    }
  }

  @keyframes orbit-path-1 {
    from {
      transform: rotateY(0deg) translateX(400px) rotateY(0deg);
    }
    to {
      transform: rotateY(360deg) translateX(400px) rotateY(-360deg);
    }
  }

  @keyframes orbit-path-2 {
    from {
      transform: rotateX(0deg) translateY(350px) rotateX(0deg);
    }
    to {
      transform: rotateX(360deg) translateY(350px) rotateX(-360deg);
    }
  }

  @keyframes orbit-path-3 {
    from {
      transform: rotateZ(0deg) translateX(300px) rotateZ(0deg);
    }
    to {
      transform: rotateZ(360deg) translateX(300px) rotateZ(-360deg);
    }
  }

  @keyframes spin-cube {
    from {
      transform: rotateX(0deg) rotateY(0deg);
    }
    to {
      transform: rotateX(360deg) rotateY(360deg);
    }
  }

  @keyframes rotate-beam {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes float-particle {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0;
    }
    10%,
    90% {
      opacity: 1;
    }
    50% {
      transform: translate(calc((Math.random() - 0.5) * 100px), -100px)
        scale(1.5);
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .three-scene-container {
      min-height: 500px;
      perspective: 800px;
    }

    .sphere-container {
      width: 180px;
      height: 180px;
    }

    .cube {
      width: 40px;
      height: 40px;
    }

    .face {
      width: 40px;
      height: 40px;
    }

    .front {
      transform: translateZ(20px);
    }
    .back {
      transform: rotateY(180deg) translateZ(20px);
    }
    .right {
      transform: rotateY(90deg) translateZ(20px);
    }
    .left {
      transform: rotateY(-90deg) translateZ(20px);
    }
    .top {
      transform: rotateX(90deg) translateZ(20px);
    }
    .bottom {
      transform: rotateX(-90deg) translateZ(20px);
    }

    @keyframes orbit-path-1 {
      from {
        transform: rotateY(0deg) translateX(250px) rotateY(0deg);
      }
      to {
        transform: rotateY(360deg) translateX(250px) rotateY(-360deg);
      }
    }

    @keyframes orbit-path-2 {
      from {
        transform: rotateX(0deg) translateY(200px) rotateX(0deg);
      }
      to {
        transform: rotateX(360deg) translateY(200px) rotateX(-360deg);
      }
    }

    @keyframes orbit-path-3 {
      from {
        transform: rotateZ(0deg) translateX(180px) rotateZ(0deg);
      }
      to {
        transform: rotateZ(360deg) translateX(180px) rotateZ(-360deg);
      }
    }

    .energy-beam {
      height: 400px;
    }
  }
</style>
