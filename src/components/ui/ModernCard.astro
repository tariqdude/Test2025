---
export interface Props {
  variant?: 'default' | 'outline' | 'gradient' | 'glass' | 'neon' | 'minimal' | 'elevated' | 'bordered';
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  className?: string;
  href?: string;
  hover?: boolean;
  glow?: boolean;
  animated?: boolean;
  direction?: 'up' | 'down' | 'left' | 'right';
  delay?: number;
}

const { 
  variant = 'default', 
  size = 'md', 
  className = '', 
  href,
  hover = true,
  glow = false,
  animated = false,
  direction = 'up',
  delay = 0
} = Astro.props;

const baseClasses = 'rounded-xl transition-all duration-500 ease-out relative overflow-hidden group';

const variants = {
  default: 'bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 shadow-lg backdrop-blur-sm',
  outline: 'border-2 border-primary-200 dark:border-primary-700 bg-transparent backdrop-blur-sm',
  gradient: 'bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-primary-900/20 dark:via-neutral-800 dark:to-secondary-900/20 border border-primary-200 dark:border-primary-700 shadow-lg',
  glass: 'bg-white/70 dark:bg-neutral-800/70 backdrop-blur-md border border-white/30 dark:border-neutral-700/50 shadow-xl shadow-black/5',
  neon: 'bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 border-2 border-cyan-400/30 shadow-lg shadow-cyan-500/20',
  minimal: 'bg-neutral-50 dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800',
  elevated: 'bg-white dark:bg-neutral-800 shadow-2xl shadow-black/10 border-0',
  bordered: 'bg-white dark:bg-neutral-800 border-2 border-neutral-300 dark:border-neutral-600'
};

const sizes = {
  xs: 'p-3',
  sm: 'p-4',
  md: 'p-6',
  lg: 'p-8',
  xl: 'p-10'
};

const hoverEffects = hover ? 'hover:shadow-2xl hover:shadow-primary-500/10 hover:-translate-y-2 hover:scale-[1.02]' : '';
const glowEffects = glow ? 'before:absolute before:inset-0 before:rounded-xl before:p-[1px] before:bg-gradient-to-r before:from-primary-500 before:to-secondary-500 before:opacity-0 hover:before:opacity-100 before:transition-opacity before:duration-500' : '';

const animationClasses = animated ? `animate-slide-${direction}` : '';
const delayStyle = delay > 0 ? `animation-delay: ${delay}s` : '';

const classes = `${baseClasses} ${variants[variant]} ${sizes[size]} ${hoverEffects} ${glowEffects} ${animationClasses} ${className}`;

const Tag = href ? 'a' : 'div';
---

<Tag href={href} class={classes} style={delayStyle}>
  {/* Glow effect background */}
  {glow && (
    <div class="absolute inset-[1px] rounded-xl bg-white dark:bg-neutral-800 z-10"></div>
  )}
  
  {/* Content wrapper */}
  <div class="relative z-20">
    <slot />
  </div>
  
  {/* Animated background patterns */}
  {animated && (
    <>
      <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700">
        <div class="absolute top-1/4 left-1/4 w-32 h-32 bg-primary-500/10 rounded-full blur-xl animate-pulse"></div>
        <div class="absolute bottom-1/4 right-1/4 w-24 h-24 bg-secondary-500/10 rounded-full blur-xl animate-pulse" style="animation-delay: 1s"></div>
      </div>
    </>
  )}
  
  {/* Hover shimmer effect */}
  <div class="absolute inset-0 -translate-x-full group-hover:translate-x-full bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-1000 ease-out"></div>
  
  {/* Border glow for neon variant */}
  {variant === 'neon' && (
    <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-cyan-500/20 via-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-sm"></div>
  )}
</Tag>

<style>
  /* Enhanced animations */
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slide-left {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes slide-right {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  .animate-slide-up {
    animation: slide-up 0.6s ease-out both;
  }
  
  .animate-slide-down {
    animation: slide-down 0.6s ease-out both;
  }
  
  .animate-slide-left {
    animation: slide-left 0.6s ease-out both;
  }
  
  .animate-slide-right {
    animation: slide-right 0.6s ease-out both;
  }
</style>
