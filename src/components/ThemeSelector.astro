---

---

<div class="theme-selector relative">
  <button
    id="theme-toggle"
    class="theme-btn btn-secondary"
    aria-label="Select theme"
  >
    <span class="icon ops-center hidden">‚ö° Ops Center</span>
    <span class="icon corporate hidden">üè¢ Corporate</span>
    <span class="icon terminal hidden">üíª Terminal</span>
    <svg
      class="chevron"
      width="12"
      height="12"
      viewBox="0 0 12 12"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M2.5 4.5L6 8L9.5 4.5"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"></path>
    </svg>
  </button>

  <div id="theme-menu" class="theme-menu hidden">
    <button data-theme="ops-center" class="theme-option">
      <span class="emoji">‚ö°</span>
      <span class="label">Ops Center</span>
    </button>
    <button data-theme="corporate" class="theme-option">
      <span class="emoji">üè¢</span>
      <span class="label">Corporate</span>
    </button>
    <button data-theme="terminal" class="theme-option">
      <span class="emoji">üíª</span>
      <span class="label">Terminal</span>
    </button>
  </div>
</div>

<style>
  .theme-selector {
    position: relative;
    display: inline-block;
  }

  .theme-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-md);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text-primary);
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .theme-btn:hover {
    border-color: var(--color-primary);
  }

  .theme-menu {
    position: absolute;
    top: calc(100% + 0.5rem);
    right: 0;
    width: 160px;
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-strong);
    padding: 0.25rem;
    z-index: 50;
    transform-origin: top right;
    animation: scaleIn 0.1s ease-out;
  }

  .theme-menu.hidden {
    display: none;
  }

  .theme-option {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    padding: 0.5rem 0.75rem;
    border: none;
    background: transparent;
    color: var(--color-text-secondary);
    font-size: 0.875rem;
    text-align: left;
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.15s ease;
  }

  .theme-option:hover {
    background: var(--color-surface-subtle);
    color: var(--color-text-primary);
  }

  .theme-option.active {
    background: var(--color-primary);
    color: var(--color-text-inverse);
  }

  .icon.hidden {
    display: none;
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>

<script>
  // Use the consolidated store for theme management
  import { theme, setTheme } from '../store/index';

  const toggle = document.getElementById('theme-toggle');
  const menu = document.getElementById('theme-menu');
  const options = document.querySelectorAll('.theme-option');
  const icons = document.querySelectorAll('.icon');

  // Update UI when store changes
  theme.subscribe(currentTheme => {
    // Update toggle text
    icons.forEach(icon => {
      if (icon.classList.contains(currentTheme)) {
        icon.classList.remove('hidden');
      } else {
        icon.classList.add('hidden');
      }
    });

    // Update active state in menu
    options.forEach(btn => {
      if (btn.getAttribute('data-theme') === currentTheme) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });
  });

  // Toggle menu
  toggle?.addEventListener('click', e => {
    e.stopPropagation();
    menu?.classList.toggle('hidden');
  });

  // Close menu when clicking outside
  document.addEventListener('click', () => {
    menu?.classList.add('hidden');
  });

  // Set theme on click
  options.forEach(btn => {
    btn.addEventListener('click', () => {
      const newTheme = btn.getAttribute('data-theme');
      if (newTheme) {
        setTheme(newTheme as any);
      }
    });
  });
</script>
